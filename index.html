<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Servo Control</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
    }
    #conn {
      font-size: 1.2rem;
      font-weight: 600;
      padding: .4rem 1rem;
      border-radius: 8px;
    }
    .ok { color: #0a0; }
    .bad { color: #c00; }
    .row {
      display: flex;
      gap: 1rem;
    }
    button {
      padding: .8rem 1.4rem;
      border-radius: 10px;
      border: 1px solid #ccc;
      cursor: pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>

  <div id="conn" class="bad">connecting…</div>

  <div class="row">
    <button id="b1" onclick="pulse(1)" class="imgBtn">
      <img src="data:image/jpeg;base64,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">
    </button>
    <button id="b2" onclick="pulse(2)">Servo 2</button>
    <button id="b3" onclick="pulse(3)">Servo 3</button>
  </div>

  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
  <script>
    // topics
    const BASE = 'nano32/servo/';
    const T1 = BASE + '1';
    const T2 = BASE + '2';
    const T3 = BASE + '3';

    const connEl = document.getElementById('conn');

    // MQTT connect
    const client = mqtt.connect('wss://test.mosquitto.org:8081', {
      clientId: 'web-' + Math.random().toString(16).slice(2),
      protocolVersion: 4,
      keepalive: 30,
      reconnectPeriod: 1500
    });

    client.on('connect', () => {
      connEl.textContent = "connected";
      connEl.classList.remove("bad");
      connEl.classList.add("ok");
    });

    client.on('close', () => {
      connEl.textContent = "disconnected";
      connEl.classList.remove("ok");
      connEl.classList.add("bad");
    });

    client.on('error', () => {
      connEl.textContent = "error";
      connEl.classList.remove("ok");
      connEl.classList.add("bad");
    });

    client.on('reconnect', () => {
      connEl.textContent = "reconnecting…";
      connEl.classList.remove("ok");
      connEl.classList.add("bad");
    });

    function pub(topic, value) {
      client.publish(topic, String(value), { qos: 1, retain: false });
    }

    function lock(btn, ms) {
      btn.disabled = true;
      setTimeout(() => btn.disabled = false, ms);
    }

    function pulse(id) {
      const topic = (id === 1) ? T1 : (id === 2) ? T2 : T3;
      const btn = document.getElementById('b' + id);

      pub(topic, "show");
      lock(btn, 2500);
    }
  </script>
</body>
</html>
